<div class="container my-5">
  <h2 class="section-title mb-4">
    <i class="bi bi-cart3"></i> Carrito
  </h2>

  <!-- Carrito vac√≠o -->
  <div *ngIf="items().length === 0; else cartTpl" class="surface p-5 text-center">
    <div class="display-6 mb-3">üõí</div>
    <h4 class="mb-2">Tu carrito est√° vac√≠o</h4>
    <p class="text-muted mb-4">Agrega productos desde el cat√°logo.</p>
    <a routerLink="/" class="btn btn-primary">
      <i class="bi bi-grid me-2"></i> Ir al cat√°logo
    </a>
  </div>

  <!-- Carrito con items -->
  <ng-template #cartTpl>
    <div class="surface p-4">
      <table class="table align-middle mb-0">
        <thead>
          <tr>
            <th>Producto</th>
            <th class="text-center">Cantidad</th>
            <th class="text-end">Subtotal</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of items()">
            <td>
              <div class="fw-semibold">{{ i.product.name }}</div>
              <small class="text-muted">ID: {{ i.productId | slice:0:8 }}</small>
            </td>
            <td class="text-center">{{ i.qty }}</td>
            <td class="text-end">
              {{ (i.product.price * i.qty) | currency:'GTQ':'symbol-narrow':'1.2-2' }}
            </td>
            <td class="text-end">
              <button
                class="btn btn-sm btn-outline-danger"
                (click)="remove(i.productId)"
                aria-label="Eliminar del carrito"
              >
                <i class="bi bi-trash"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="text-end mt-4">
        <div class="fw-semibold fs-5 mb-3">
          Total: {{ total() | currency:'GTQ':'symbol-narrow':'1.2-2' }}
        </div>
        <button class="btn btn-outline-light me-2" (click)="clear()">
          <i class="bi bi-x-circle"></i> Vaciar
        </button>
        <button class="btn btn-primary" (click)="checkout()">
          <i class="bi bi-credit-card"></i> Ir a pagar
        </button>
      </div>
    </div>
  </ng-template>
</div>
