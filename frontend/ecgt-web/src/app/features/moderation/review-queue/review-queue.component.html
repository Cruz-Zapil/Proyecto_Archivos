<div class="surface p-4 rounded-3 shadow-sm position-relative">
  <!-- Encabezado -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4 gap-3">
    <h2 class="m-0 fw-semibold text-dark">
      <i class="bi bi-eye me-2 text-primary"></i> Revisión de productos
    </h2>

    <!-- Buscador -->
    <div class="input-group w-auto">
      <span class="input-group-text bg-light border-end-0">
        <i class="bi bi-search text-muted"></i>
      </span>
      <input
        type="text"
        class="form-control border-start-0"
        placeholder="Buscar producto..."
        [(ngModel)]="filter"
      />
    </div>
  </div>

  <!-- Estado de carga -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3 text-muted">Cargando productos...</p>
  </div>

  <!-- Sin productos -->
  <div *ngIf="!loading && pending.length === 0" class="text-center py-5 text-muted">
    <i class="bi bi-box2 display-6 d-block mb-2"></i>
    <p>No hay productos pendientes de revisión.</p>
  </div>

  <!-- Lista de productos -->
  <div *ngIf="!loading && pending.length > 0" class="row g-4">
    <div
      *ngFor="let p of pending | filterByName:filter"
      class="col-md-6 col-lg-4"
    >
      <div class="card h-100 border-0 shadow-sm hover-card">
        <!-- Imagen -->
        <div class="ratio ratio-1x1 bg-light rounded-top overflow-hidden">
          <img
            [src]="p.imageUrl || p.imageUrls?.[0] || 'assets/img/no-image.png'"
            class="object-fit-cover w-100 h-100"
            alt="Imagen del producto"
          />
        </div>

        <div class="card-body">
          <!-- Nombre + Estado -->
          <div class="d-flex justify-content-between align-items-center mb-2">
            <h5 class="card-title text-truncate mb-0" title="{{ p.name }}">
              {{ p.name }}
            </h5>

            <span
              class="badge"
              [ngClass]="{
                'bg-warning text-dark': p.status?.toString() === 'PENDING',
                'bg-success': p.status?.toString() === 'APPROVED',
                'bg-danger': p.status?.toString() === 'REJECTED'
              }"
            >
              {{
                p.status?.toString() === 'PENDING'
                  ? 'Pendiente'
                  : p.status?.toString() === 'APPROVED'
                  ? 'Aprobado'
                  : 'Rechazado'
              }}
            </span>
          </div>

          <!-- Descripción -->
          <p class="card-text small text-muted mb-2" [title]="p.description">
            {{ p.description || 'Sin descripción' }}
          </p>

          <!-- Precio -->
          <p class="fw-semibold text-primary mb-2">
            {{ p.price | currency: 'GTQ' }}
          </p>

          <!-- Fecha -->
          <p class="text-muted small mb-0">
            Publicado el {{ p.createdAt | date: 'short' }}
          </p>
        </div>

        <!-- Botones de acción -->
        <div class="card-footer bg-transparent border-0 text-end pb-3">
          <button
            class="btn btn-outline-success btn-sm me-2"
            (click)="approve(p)"
          >
            <i class="bi bi-check2"></i> Aprobar
          </button>

          <button
            class="btn btn-outline-danger btn-sm"
            (click)="reject(p)"
          >
            <i class="bi bi-x-circle"></i> Rechazar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast de mensajes -->
  <div
    *ngIf="message"
    class="toast-container position-fixed top-0 end-0 p-3"
    style="z-index: 9999"
  >
    <div class="toast show align-items-center text-bg-light border-0 shadow">
      <div class="d-flex">
        <div class="toast-body">
          <i class="bi bi-info-circle me-2 text-primary"></i> {{ message }}
        </div>
        <button
          type="button"
          class="btn-close me-2 m-auto"
          (click)="message = ''"
        ></button>
      </div>
    </div>
  </div>
</div>
